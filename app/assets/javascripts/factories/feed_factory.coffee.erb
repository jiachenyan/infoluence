
angular.module('Infoluence').factory "FeedFactory", [

 'FeedService'

 (FeedService) ->

  o =
   feed: []
   pageNum: 0

  o.getFeed = (type) =>

   o.pageNum++
   FeedService.getFeed(type,o.pageNum).then (res) =>

    data = res.data

    data.forEach (post) =>

     post.publishTimeString = moment(post.publishTime * 1000).format("L, h:mm a")
     post.createTimeString = moment(post.createTime * 1000).format("L, h:mm a")
     
     o.feed.push post

  o.clear = =>
   o.feed = []
   o.pageNum =0



  o

]
